{
  "kind": "spec_vs_diff_report",
  "version": "1.0",
  "generatedAt": "2026-02-05T15:59:48.159Z",
  "summary": "REQ-21 appears largely addressed via dynamic canonical/OG URL updates and robots/sitemap using relative URLs with /me/* disallowed. REQ-22 is partially addressed (manifest + SW file), but the diff does not show service worker registration. REQ-23 adds a Home-page install banner, but the hook does not gate display on “not already installed”. REQ-24 adds an Android APK-from-PWA guide, but the provided diff is truncated/incomplete, so step-by-step completeness cannot be verified.",
  "missing_requirements": [
    {
      "id": "REQ-22",
      "requirement": "A service worker is registered in production builds and the app is installable as a PWA on Android Chrome.",
      "reason": "A service worker file (frontend/public/sw.js) is added, but the diff does not show any client-side registration code (e.g., navigator.serviceWorker.register) in the app entrypoint or elsewhere, so installability criteria cannot be confirmed from the provided changes.",
      "evidence": [
        "frontend/public/sw.js",
        "frontend/index.html"
      ]
    },
    {
      "id": "REQ-23",
      "requirement": "Only show the install prompt when installation is supported and the app is not already installed.",
      "reason": "The hook computes `isInstallable` as `!!deferredPrompt && !isDismissed` and does not include `!isInstalled` in that condition. Therefore, the banner may still render even when `isInstalled` is true (depending on whether a deferred prompt exists).",
      "evidence": [
        "frontend/src/hooks/usePwaInstallPrompt.ts",
        "frontend/src/components/InstallPromptBanner.tsx"
      ]
    },
    {
      "id": "REQ-24",
      "requirement": "Provide a written guide with clear prerequisites and step-by-step instructions (tools, where to put deployed URL, build/sign steps at a high level, limitations).",
      "reason": "The added documentation file is truncated in the diff summary and stops at the beginning of Step 1 (Bubblewrap), so it is not verifiable that the guide includes the required step-by-step instructions, URL placement, signing/build steps, and limitations.",
      "evidence": [
        "frontend/docs/android-apk-from-pwa.md"
      ]
    }
  ],
  "hallucinated_features": [],
  "confidence": 0.68,
  "changed_files": [
    "backend/main.mo",
    "frontend-file-summaries.txt",
    "frontend/docs/android-apk-from-pwa.md",
    "frontend/index.html",
    "frontend/public/manifest.webmanifest",
    "frontend/public/robots.txt",
    "frontend/public/sitemap.xml",
    "frontend/public/sw.js",
    "frontend/src/App.tsx",
    "frontend/src/components/InstallPromptBanner.tsx",
    "frontend/src/hooks/usePwaInstallPrompt.ts",
    "frontend/src/pages/HomePage.tsx",
    "frontend/src/utils/seo.ts",
    "project_state.json"
  ]
}